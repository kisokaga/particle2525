<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ç§˜å¯†ã®èŠ±å ã„</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            padding-top: 50px;
        }
        #result {
            font-size: 3em;
            margin: 30px auto;
            font-weight: bold;
            min-height: 60px; /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ã®ç¢ºä¿ */
        }
        .fortune-text {
            /* é€šå¸¸ã®çµæœï¼ˆå¥½ã/å«Œã„ï¼‰ */
            color: #d9534f; 
        }
        .final-message {
            /* æœ€çµ‚çµæœ */
            color: #337ab7; 
            font-size: 2em;
        }
        button {
            padding: 15px 30px;
            font-size: 1.5em;
            margin: 10px;
            cursor: pointer;
            border-radius: 8px;
            border: none;
            transition: background-color 0.3s;
        }
        #fortune-button {
            background-color: #5cb85c; /* ç·‘è‰² */
            color: white;
        }
        #fortune-button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        #reset-button {
            background-color: #f0ad4e; /* ã‚ªãƒ¬ãƒ³ã‚¸è‰² */
            color: white;
        }
    </style>
</head>
<body>

    <h1>ğŸŒ¹ ç§˜å¯†ã®èŠ±å ã„ ğŸŒ¹</h1>
    <p>èŠ±ã³ã‚‰ã®æšæ•°ã¯ç§˜å¯†ã§ã™ã€‚ãƒ‰ã‚­ãƒ‰ã‚­ã—ãªãŒã‚‰ã¡ãã‚Šã¾ã—ã‚‡ã†ã€‚</p>
    
    <button id="fortune-button" onclick="fortune()">èŠ±ã³ã‚‰ã‚’ã¡ãã‚‹</button>
    <button id="reset-button" onclick="resetFortune()">æœ€åˆã‹ã‚‰ï¼ˆæ–°ã—ã„èŠ±ï¼‰</button>

    <div id="result">å ã„é–‹å§‹ï¼</div>

    <script>
        // å ã„ã®çµæœã®é…åˆ—ï¼š [0]ãŒã€Œå«Œã„ã€ã€[1]ãŒã€Œå¥½ãã€
        const fortunes = ["å«Œã„", "å¥½ã"];

        let totalPetals;     // èŠ±ã³ã‚‰ã®ç·æ•° (5ã€œ10æšã€ç§˜å¯†)
        let petalsChipped;   // ã¡ãã£ãŸèŠ±ã³ã‚‰ã®æšæ•° (0ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆ)

        /**
         * 5ã€œ10ã®é–“ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
         */
        function getRandomPetalCount() {
            // (10 - 5 + 1) = 6 ã‚’ã‹ã‘ã¦ 0ã€œ5.99... ã®ç¯„å›²ã«ã™ã‚‹
            // 5 ã‚’è¶³ã—ã¦ 5ã€œ10.99... ã®ç¯„å›²ã«ã™ã‚‹
            return Math.floor(Math.random() * 6) + 5;
        }

        /**
         * å ã„ã®åˆæœŸè¨­å®šã‚’è¡Œã†é–¢æ•°
         */
        function initializeFortune() {
            // ãƒ©ãƒ³ãƒ€ãƒ ã«èŠ±ã³ã‚‰ã®ç·æ•°ã‚’è¨­å®š
            totalPetals = getRandomPetalCount();
            petalsChipped = 0;
            
            // ç”»é¢ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('result').textContent = "èŠ±ã³ã‚‰ã‚’ã¡ãã£ã¦ãã ã•ã„...";
            document.getElementById('result').className = ''; // ã‚¯ãƒ©ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
            
            // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            document.getElementById('fortune-button').disabled = false;
            document.getElementById('fortune-button').textContent = "èŠ±ã³ã‚‰ã‚’ã¡ãã‚‹";
        }

        /**
         * èŠ±å ã„ã‚’è¡Œã†é–¢æ•°
         */
        function fortune() {
            const resultElement = document.getElementById('result');
            const fortuneButton = document.getElementById('fortune-button');
            
            // æ—¢ã«æœ€å¾Œã®èŠ±ã³ã‚‰ã‚’ã¡ãã‚Šçµ‚ãˆã¦ã„ãŸã‚‰ä½•ã‚‚ã—ãªã„
            if (petalsChipped >= totalPetals) {
                return;
            }

            // æœ€å¾Œã®èŠ±ã³ã‚‰ã‚’ã¡ãã‚‹å ´åˆ
            if (petalsChipped === totalPetals - 1) {
                // æœ€å¾Œã®çµæœã‚’å–å¾—
                const finalResult = fortunes[petalsChipped % fortunes.length];
                
                // æœ€çµ‚çµæœã‚’è¡¨ç¤º
                resultElement.innerHTML = `<span class="final-message">ğŸ‰ æœ€å¾Œã®çµæœã¯... ${finalResult}ï¼ ğŸ‰</span>`;
                resultElement.className = 'final-message';
                
                // ã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—ã‚„ã—ã¦ã€æ¬¡å›ã‹ã‚‰ã¯ãƒœã‚¿ãƒ³ãŒæŠ¼ã›ãªã„ã‚ˆã†ã«ã™ã‚‹
                petalsChipped++;
                fortuneButton.disabled = true;
                fortuneButton.textContent = "çµ‚äº†";
                
                return;
            }

            // æœ€å¾Œã®èŠ±ã³ã‚‰ã§ã¯ãªã„å ´åˆ
            
            // ã¡ãã£ãŸæšæ•° (0ã‹ã‚‰å§‹ã¾ã‚‹) ã‚’2ã§å‰²ã£ãŸä½™ã‚Š (0ã‹1) ã§çµæœã‚’å–å¾—
            const currentFortune = fortunes[petalsChipped % fortunes.length];
            
            // çµæœã‚’ç”»é¢ã«è¡¨ç¤º
            resultElement.textContent = currentFortune;
            resultElement.className = 'fortune-text';
            
            // ã¡ãã£ãŸèŠ±ã³ã‚‰ã®æšæ•°ã‚’å¢—ã‚„ã™
            petalsChipped++;
        }

        /**
         * å ã„ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹é–¢æ•°
         */
        function resetFortune() {
            document.getElementById('result').textContent = "æ–°ã—ã„èŠ±ã‚’ç”¨æ„ã—ã¾ã—ãŸ...";
            // æ–°ã—ã„èŠ±ã³ã‚‰ã®ç·æ•°ã‚’è¨­å®šã—ã¦åˆæœŸåŒ–
            initializeFortune();
        }

        // ãƒšãƒ¼ã‚¸ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã¨ãã«æœ€åˆã«å®Ÿè¡Œ
        window.onload = initializeFortune;

    </script>

</body>
</html>